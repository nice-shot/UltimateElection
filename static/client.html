<html>
	<body>
		<input type="text" id="party">
		<button id="clicker">Vote</button>
		<div>
			<h1>Score:</h1>
			<p id="score"></p>
		</div>
		<pre id="log"></pre>
		<script src="https://code.jquery.com/jquery-2.1.3.min.js"></script>
		<script>
			$(function () {
				"use strict";

				var partyDisabled = false;
				var partyName = "";
				function disableParty() {
					if (partyDisabled) return;
					$("#party").attr("disabled", true);
					partyDisabled = true;
					partyName = $("#party").val();
				}

				var logOutput = $("#log");
				function log(message) {
					logOutput.text(logOutput.text() + "\n" + message);
				}

				var socket = new WebSocket("ws://192.168.0.105:8000");
				socket.onmessage = function (message) {
					var parties = JSON.parse(message.data);
					log("Got parties: " + message.data)
					$("#score").text(parties[partyName]);		
				};

				$("#clicker").click(function () {
					log("clicked - sending " + partyName);
					disableParty();
					socket.send(partyName);
				})
			});
		</script>
	</body>
</html>